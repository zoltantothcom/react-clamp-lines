Object.defineProperty(exports,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n=require("react");e=n;var i=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={noClamp:!1,text:"."},t.element=null,t.original=e.text,t.lineHeight=0,t.start=0,t.middle=0,t.end=0,t.debounced=t.debounce(t.action),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n.PureComponent),t(i,[{key:"componentDidMount",value:function(){this.props.text&&(this.lineHeight=this.element.clientHeight+1,this.clampLines(),window.addEventListener("resize",this.debounced))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debounced)}},{key:"debounce",value:function(e){var t=this,n=void 0;return function(){var i=t,r=!n;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(i)},200),r&&e.apply(i)}}},{key:"action",value:function(){this.setState({noClamp:!1},this.clampLines)}},{key:"clampLines",value:function(){var e=this;this.setState({text:""},function(){var t=e.lineHeight*e.props.lines+1;for(e.start=0,e.middle=0,e.end=e.original.length;e.start<=e.end;){if(e.middle=Math.floor((e.start+e.end)/2),e.element.innerText=e.original.slice(0,e.middle),e.middle===e.original.length)return void e.setState({text:e.original,noClamp:!0});e.moveMarkers(t)}e.setState(function(){return{text:e.original.slice(0,e.middle-5).trim()+"..."}},function(){e.element.innerText=e.state.text})})}},{key:"moveMarkers",value:function(e){this.element.clientHeight<=e?this.start=this.middle+1:this.end=this.middle-1}},{key:"render",value:function(){var e=this,t=this.props;return t.text?(0,n.createElement)(t.is,{className:t.className,ref:function(t){e.element=t}},this.state.text):null}}]),i}();i.defaultProps={className:"",is:"div",lines:3},exports.default=i;
//# sourceMappingURL=index.js.map
