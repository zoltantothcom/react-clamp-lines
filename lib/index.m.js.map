{"version":3,"file":"index.m.js","sources":["index.js"],"sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:!0});var e,t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n=require(\"react\");e=n;var i=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state={noClamp:!1,text:\".\"},t.element=null,t.original=e.text,t.lineHeight=0,t.start=0,t.middle=0,t.end=0,t.debounced=t.debounce(t.action),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n.PureComponent),t(i,[{key:\"componentDidMount\",value:function(){this.props.text&&(this.lineHeight=this.element.clientHeight+1,this.clampLines(),window.addEventListener(\"resize\",this.debounced))}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this.debounced)}},{key:\"debounce\",value:function(e){var t=this,n=void 0;return function(){var i=t,r=!n;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(i)},200),r&&e.apply(i)}}},{key:\"action\",value:function(){this.setState({noClamp:!1},this.clampLines)}},{key:\"clampLines\",value:function(){var e=this;this.setState({text:\"\"},function(){var t=e.lineHeight*e.props.lines+1;for(e.start=0,e.middle=0,e.end=e.original.length;e.start<=e.end;){if(e.middle=Math.floor((e.start+e.end)/2),e.element.innerText=e.original.slice(0,e.middle),e.middle===e.original.length)return void e.setState({text:e.original,noClamp:!0});e.moveMarkers(t)}e.setState(function(){return{text:e.original.slice(0,e.middle-5).trim()+\"...\"}},function(){e.element.innerText=e.state.text})})}},{key:\"moveMarkers\",value:function(e){this.element.clientHeight<=e?this.start=this.middle+1:this.end=this.middle-1}},{key:\"render\",value:function(){var e=this,t=this.props;return t.text?(0,n.createElement)(t.is,{className:t.className,ref:function(t){e.element=t}},this.state.text):null}}]),i}();i.defaultProps={className:\"\",is:\"div\",lines:3},exports.default=i;\n//# sourceMappingURL=index.js.map\n"],"names":["Object","defineProperty","exports","value","t","e","n","length","i","enumerable","configurable","writable","key","prototype","require","TypeError","this","ReferenceError","__proto__","getPrototypeOf","call","state","noClamp","text","element","original","lineHeight","start","middle","end","debounced","debounce","action","create","constructor","setPrototypeOf","PureComponent","props","clientHeight","clampLines","window","addEventListener","removeEventListener","r","clearTimeout","setTimeout","apply","setState","lines","Math","floor","innerText","slice","moveMarkers","trim","createElement","is","className","ref","defaultProps","default"],"mappings":"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"}